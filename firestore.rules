
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Rules for the patients collection
    match /patients/{patientId} {
      // Allow read/write for authenticated users (doctors)
      allow read, write: if request.auth != null;

      // Rules for the chat subcollection
      match /chat/{messageId} {
        // Allow anyone (doctor or patient with the link) to read/write to a specific chat
        allow read, write: if true;
      }
    }
  }
}
